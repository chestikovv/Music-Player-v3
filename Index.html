<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grig Music</title>
    <link rel="stylesheet" href="style.css">
    <link rel="shortcut icon" href="images/logo.png" type="image/x-icon">
</head>
<body>
<div id="custom-bg" class="app-bg-layer"></div>
<div class="app-container">
    <aside class="sidebar">
        <div class="logo">
            <img class="logo-img" src="images/logo.png" alt="">
            <h1>GRIG<span>Music</span></h1>
        </div>
        <div class="section-header">Плейлисты</div>
        <div id="playlist-list" class="scrollable"></div>
        <div class="sidebar-footer">
            <div class="sidebar-playlist-btn">
                <button class="btn-outline nofull-width" onclick="openCreatePlaylistModal()">+ Создать</button>
                <button class="btn-outline nofull-width" onclick="openDeleteConfirmModal()">Удалить</button>
            </div>
            <button class="btn-outline full-width" onclick="openSettingsModal()" style="margin-bottom: 10px;">Настройки</button>
        </div>
    </aside>

    <main class="player-center">
        <div class="player-ui">
            <div class="cover-box">
                <img src="images/logo.png" id="main-cover">
                <div class="cover-overlay" onclick="document.getElementById('cover-input').click()">
                    <span>СМЕНИТЬ ОБЛОЖКУ</span>
                </div>
            </div>
            <div class="track-info">
                <h1 id="current-track-title">Выберите трек</h1>
                <p id="current-playlist-name">Плейлист: Все треки</p>
            </div>
            <div class="controls-group">
                <div class="progress-bar-container">
                    <span id="time-current">0:00</span>
                    <input type="range" id="progress-slider" value="0" min="0" max="100">
                    <span id="time-total">0:00</span>
                </div>
                <div class="playback-btns">
                    <button onclick="toggleShuffle()" class="btn-icon" id="shuffle-btn"><svg viewBox="0 0 24 24" width="24" height="24"><path d="M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.45 20 9.5V4h-5.5zm.59 10.83l-1.41 1.41 3.17 3.17L14.5 22H20v-5.5l-2.04 2.04-2.87-2.87z" fill="currentColor"/></svg></button>
                    <button onclick="prevTrack()" class="btn-icon"><svg viewBox="0 0 24 24" width="32" height="32"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z" fill="currentColor"/></svg></button>
                    <button onclick="togglePlay()" class="btn-play-pause">
                        <svg id="svg-play" viewBox="0 0 24 24" width="32" height="32"><path d="M8 5v14l11-7z" fill="white"/></svg>
                        <svg id="svg-pause" viewBox="0 0 24 24" width="32" height="32" style="display:none;"><path d="M6 19h4V5H6zm8-14v14h4V5z" fill="white"/></svg>
                    </button>
                    <button onclick="nextTrack()" class="btn-icon"><svg viewBox="0 0 24 24" width="32" height="32" style="transform: rotate(180deg);"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z" fill="currentColor"/></svg></button>
                    <button onclick="toggleRepeat()" class="btn-icon" id="repeat-btn"><svg viewBox="0 0 24 24" width="28" height="28"><path d="M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z" fill="currentColor"/></svg></button>
                </div>
                <div class="volume-box">
                    <svg width="20" height="20" viewBox="0 0 24 24" style="opacity:0.5"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z" fill="currentColor"/></svg>
                    <input type="range" id="volume-slider" value="70" min="0" max="100">
                </div>
            </div>
            <button class="btn-outline" style="margin-top: 25px; width: auto; padding: 10px 20px;" onclick="openMoveModal()">✚ Добавить в плейлист</button>
        </div>
    </main>

    <section class="tracks-panel" id="drop-zone">
        <div class="section-header">Очередь</div>
        <div class="search-box">
            <input type="text" id="search-input" placeholder="Поиск трека..." oninput="handleSearch(this.value)">
        </div>
        <div id="songs-container" class="scrollable"></div>
        <div class="panel-footer">
            <button class="btn-main btn-add-files" onclick="document.getElementById('audio-input').click()">✚ Добавить файлы</button>
        </div>
    </section>
</div>

<!-- Модальное окно настроек -->
<div id="settings-modal" class="modal-overlay">
    <div class="modal-content">
        <h3>Настройки</h3>
        <div class="setting-item">
            <span>Цвет акцента</span>
            <input type="color" id="accent-color-input" oninput="changeAccentColor(this.value)">
        </div>
        <div class="setting-item">
            <span>Задний фон</span>
            <div class="bg-controls">
                <div class="bg-control-box" onclick="resetBackground()"><svg viewBox="0 0 24 24" width="20" height="20" fill="#ff4d4d"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/></svg></div>
                <div class="bg-control-box" id="bg-preview-box" onclick="document.getElementById('bg-input').click()"><span id="bg-plus-icon">+</span></div>
            </div>
        </div>
        <button class="btn-main" style="margin-top:30px" onclick="closeSettingsModal()">Закрыть</button>
    </div>
</div>

<!-- Модальное окно перемещения -->
<div id="move-modal" class="modal-overlay">
    <div class="modal-content">
        <h3>Добавить в плейлист</h3>
        <div id="modal-playlist-list" class="scrollable" style="max-height:250px; margin: 15px 0;"></div>
        <button class="btn-outline" onclick="closeMoveModal()">Отмена</button>
    </div>
</div>

<!-- Универсальное окно ввода (Редактирование / Создание) -->
<div id="edit-modal" class="modal-overlay">
    <div class="modal-content">
        <h3 id="edit-modal-title">Изменить</h3>
        <input type="text" id="edit-input">
        <div style="display:flex; gap:10px; margin-top:20px;">
            <button class="btn-main" onclick="saveEdit()">Готово</button>
            <button class="btn-outline" onclick="closeEditModal()">Отмена</button>
        </div>
    </div>
</div>

<!-- Модальное окно подтверждения удаления -->
<div id="confirm-modal" class="modal-overlay">
    <div class="modal-content">
        <h3 id="confirm-modal-title">Вы уверены?</h3>
        <p id="confirm-modal-text" style="color: var(--dim); margin-top: 10px;"></p>
        <div style="display:flex; gap:10px; margin-top:20px; ">
            <button class="btn-main" id="confirm-modal-btn" style="background: #ff4d4d;">Удалить</button>
            <button class="btn-outline" onclick="closeConfirmModal()">Отмена</button>
        </div>
    </div>
</div>

<input type="file" id="audio-input" accept="audio/*" multiple hidden>
<input type="file" id="cover-input" accept="image/*" hidden onchange="changeTrackCover(this.files[0])">
<input type="file" id="bg-input" accept="image/*" hidden onchange="changeBackground(this.files[0])">
<audio id="audio-core"></audio>
<script src="script.js"></script>
</body>
</html>
<!-- МЕТКА ОТКАТА! --> <!-- МЕТКА ОТКАТА! --> <!-- МЕТКА ОТКАТА! --> <!-- МЕТКА ОТКАТА! -->